<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VC-Funded Defence Start-up Journey</title>
  <meta name="description" content="Interactive timeline from Pre-seed/Seed to Exit with metrics and people views." />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --header-h: 64px;
      --bg: #ffffff;
      --border: #e6e6e6;
      --text: #111111;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color: var(--text);
      background: var(--bg);
      line-height: 1.5;
    }
    a { color: inherit; text-decoration: none; }

    /* Accessibility: jump straight to content */
    .skip-link {
      position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
    }
    .skip-link:focus {
      position: static; width: auto; height: auto; padding: 8px 12px;
      background: #000; color: #fff; border-radius: 6px;
    }

    header.site-header {
      position: sticky; top: 0; z-index: 1000;
      height: var(--header-h);
      display: flex; align-items: center; gap: 16px;
      padding: 0 16px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
    }
    .brand { display: inline-flex; align-items: center; gap: 12px; }
    .brand img { height: 36px; width: auto; object-fit: contain; }

    main { padding: 24px 16px; max-width: 1100px; margin: 0 auto; }
    h1 { font-size: clamp(1.5rem, 1.2rem + 1.5vw, 2.25rem); margin: 16px 0 8px; }
  </style>
</head>
<body>

  <header class="site-header">
    <!-- Replace the src below with your actual logo path, e.g., assets/korn-ferry-logo.svg -->
    <a href="#" class="brand" aria-label="Korn Ferry home">
      <img src="kf-logo.png" />
    </a>
  </header>


  <!-- Tailwind via CDN (JIT in the browser) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 + ReactDOM (UMD) from jsDelivr (more enterprise-friendly than UNPKG) -->
  <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel standalone to compile JSX in the browser -->
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>

  <style>
    html, body { height: 100%; }
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    #fallback { display:none; }
  </style>
</head>
<body class="min-h-screen bg-white text-slate-800">
  <noscript>
    <div class="p-4 m-4 border rounded bg-red-50 text-red-700">This page needs JavaScript to run. Please enable JavaScript and reload.</div>
  </noscript>

  <!-- Friendly status / error surface -->
  <div id="status" class="hidden m-4 p-3 rounded border text-xs"></div>

  <div id="root" class="min-h-screen"></div>

  <!-- App Code (JSX compiled in-browser) -->
  <script type="text/babel" data-presets="react">
    const { useMemo, useState, useEffect, useRef } = React;

    // Basic inline error surface
    function report(msg) {
      const el = document.getElementById('status');
      if (!el) return;
      el.className = "m-4 p-3 rounded border text-xs bg-yellow-50 text-yellow-800";
      el.textContent = "[Notice] " + msg;
      el.style.display = "block";
    }
    window.addEventListener('error', (e) => {
      const el = document.getElementById('status');
      if (!el) return;
      el.className = "m-4 p-3 rounded border text-xs bg-red-50 text-red-800";
      el.textContent = "[Error] " + (e.error?.message || e.message || "Unknown error");
      el.style.display = "block";
    });

    // ---------- Simple Icon Components (SVG inline) ---------- //
    const IconBase = ({ className, children }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"
           strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">{children}</svg>
    );
    const Users = ({ className="w-5 h-5" }) => (
      <IconBase className={className}>
        <path d="M16 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </IconBase>
    );
    const Info = ({ className="w-5 h-5" }) => (
      <IconBase className={className}>
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12" y2="8"/>
      </IconBase>
    );
    const Briefcase = ({ className="w-5 h-5" }) => (
      <IconBase className={className}>
        <rect x="3" y="7" width="18" height="13" rx="2" ry="2"/>
        <path d="M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
        <path d="M3 13h18"/>
      </IconBase>
    );
    const ShieldCheck = ({ className="w-5 h-5" }) => (
      <IconBase className={className}>
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        <path d="m9 12 2 2 4-4"/>
      </IconBase>
    );
    const Bug = ({ className="w-5 h-5" }) => (
      <IconBase className={className}>
        <rect x="8" y="8" width="8" height="8" rx="4"/>
        <path d="M3 13h3M18 13h3M4 7l3 3M20 7l-3 3M4 19l3-3M20 19l-3-3M13 4V2M11 4V2"/>
      </IconBase>
    );

    // ---------- Data Model ---------- //
    const STAGES = [
      {
        id: "preseed-seed",
        name: "Pre-seed / Seed",
        startYear: 0.0,
        endYear: 1.5,
        metrics: {
          funding: "$0.1–2m",
          revenueRunRate: "$0–0.5m",
          headcount: "5–20",
        },
        context: {
          funding: "Angels, micro-VCs, defence-focused seed funds; non-dilutive (SBIR/DASA).",
          revenueRunRate: "Mostly pre-revenue; occasional paid pilots or design partner fees.",
          headcount: "Founders + first hires; contractors supplement cleared/rare skills.",
        },
        challenges: [
          "Access to end users & mission fit",
          "Selecting a dual-use wedge and proving feasibility",
          "Early security & export posture (ITAR/UK export planning)",
          "Winning first pilots / grants (SBIR, DASA, etc.)",
        ],
        peopleNeeds: [
          "Clarify founder roles & equity expectations",
          "Define mission-critical roles and early hiring profile",
          "Codify values and culture from day 0",
          "Create a simple, scalable talent roadmap",
        ],
        kfHelp: [
          "Founder & leadership assessment to map strengths/gaps",
          "Talent strategy for critical roles and early workforce planning",
          "Culture blueprint & org design principles",
          "Early hiring support through talent networks",
        ],
      },
      {
        id: "series-a",
        name: "Series A (PMF)",
        startYear: 1.2,
        endYear: 3.0,
        metrics: {
          funding: "$2–15m",
          revenueRunRate: "$0–1m+",
          headcount: "20–60",
        },
        context: {
          funding: "Institutional A led by sector funds; milestone-based tranches common.",
          revenueRunRate: "Mix of pilots/OTAs and first limited production; ARR starting to emerge.",
          headcount: "Build out Eng/Prod/GTM leads; begin basic people ops.",
        },
        challenges: [
          "Demonstrating repeatable PMF with defence users",
          "Compliance roadmap (ATO/RMF, CMMC path, facility/SCIF planning)",
          "Recruiting scarce cleared engineering & BD talent",
          "Standing up basic HR/People processes",
        ],
        peopleNeeds: [
          "Hire scale-up functional leaders (Prod, Eng, GTM)",
          "Establish OKRs/KPIs and operating cadence",
          "Professionalise hiring, onboarding, feedback",
        ],
        kfHelp: [
          "Leadership search for first-line executives",
          "Org design to formalise structure and accountabilities",
          "HR infrastructure: policies, performance systems, TA enablement",
        ],
      },
      {
        id: "series-b",
        name: "Series B (Scale GTM)",
        startYear: 2.5,
        endYear: 5.0,
        metrics: {
          funding: "$10–50m",
          revenueRunRate: "$5–25m",
          headcount: "60–200",
        },
        context: {
          funding: "Scale-up capital for LRIP, GTM, certifications; working-capital lines.",
          revenueRunRate: "Multi-site deployments; LRIP/initial production drive step change.",
          headcount: "Add Ops/QA/Supply Chain; deepen cleared ICs and middle management.",
        },
        challenges: [
          "Prototype → production \"valley of death\"",
          "Working capital for manufacturing; supply chain maturity",
          "Platform integrations, certifications, range access",
          "Security hardening and audit readiness",
        ],
        peopleNeeds: [
          "Build leadership depth & middle-manager capability",
          "Install scalable processes and comms rhythms",
          "Begin succession planning for key roles",
          "Formalise go-to-market strategy",
        ],
        kfHelp: [
          "Targeted leadership & manager development programs",
          "Specialist recruitment for Sales, Ops, Finance, Security",
          "Stand-up corporate functions (HR, Legal, FP&A, COO)",
          "Implement Commercial Excellence programme including sales methodology",
        ],
      },
      {
        id: "series-c",
        name: "Series C+ (Expansion / Pre-IPO)",
        startYear: 4.5,
        endYear: 7.5,
        metrics: {
          funding: "$30–100m+",
          revenueRunRate: "$25–100m",
          headcount: "200–600",
        },
        context: {
          funding: "Growth equity/strategics (incl. primes); international channels.",
          revenueRunRate: "Program-of-record ramp; multi-year contracts; services attach.",
          headcount: "Global functions, shared services, field support; governance matures.",
        },
        challenges: [
          "Manufacturing scale, QA, safety certification",
          "Audit/compliance burden; export controls (ITAR/TAA)",
          "Revenue concentration risk; international expansion",
          "Sustainment & service economics",
        ],
        peopleNeeds: [
          "Formal HR policies, DEI, equity management",
          "Leadership development & periodic org design reviews",
          "Investor-grade reporting and readiness",
        ],
        kfHelp: [
          "C-suite upgrade for global scaling/IPO experience",
          "Board & governance advisory (committees, composition)",
          "Culture resilience mapping during rapid growth",
        ],
      },
      {
        id: "exit",
        name: "Exit (IPO / M&A)",
        startYear: 7.0,
        endYear: 10.0,
        metrics: {
          funding: "—",
          revenueRunRate: "$100–300m",
          headcount: "400–1,000+",
        },
        context: {
          funding: "Late private round optional; focus on liquidity and readiness.",
          revenueRunRate: "Triple-digit run-rate with backlog; mix of hardware, software, and services.",
          headcount: "Sustainment & field service scale; public-company functions in place.",
        },
        challenges: [
          "Public-company readiness (SOX, controls, IR)",
          "Executive compensation & retention (LTIP/RSUs)",
          "Governance for government-heavy customer base",
          "Change leadership, morale & transparency",
        ],
        peopleNeeds: [
          "Align exec compensation with public benchmarks",
          "Prepare board & leadership for investor relations",
          "Retention & communications through the transaction",
        ],
        kfHelp: [
          "Investor-facing leadership coaching & assessment",
          "Compliance & governance advisory (SOX readiness)",
          "Compensation benchmarking and LTIP/RSU design",
        ],
      },
    ];

    const YEARS_MAX = 10; // timeline horizontal axis limit

    // ---------- Helpers ---------- //
    function classNames(...xs) {
      return xs.filter(Boolean).join(" ");
    }

    // Numeric parsing helpers for charts
    function extractNumbers(input) {
      if (!input) return [];
      const matches = input.match(/[0-9][0-9,]*(?:\.[0-9]+)?/g);
      if (!matches) return [];
      return matches
        .map((t) => parseFloat(t.replace(/,/g, "")))
        .filter((n) => !Number.isNaN(n));
    }

    function midpoint(nums) {
      if (!nums.length) return null;
      if (nums.length === 1) return nums[0];
      return (nums[0] + nums[nums.length - 1]) / 2;
    }

    function rangeMinMaxFromString(s) {
      const nums = extractNumbers(s);
      if (nums.length === 0) return { min: null, max: null };
      if (nums.length === 1) return { min: nums[0], max: nums[0] };
      return { min: Math.min(...nums), max: Math.max(...nums) };
    }

    function headcountValue(stage) {
      const nums = extractNumbers(stage.metrics.headcount);
      const m = midpoint(nums);
      return m === null ? null : m;
    }

    function headcountRange(stage) {
      return rangeMinMaxFromString(stage.metrics.headcount);
    }

    function revenueMillions(stage) {
      const nums = extractNumbers(stage.metrics.revenueRunRate);
      const m = midpoint(nums);
      return m === null ? null : m;
    }

    function revenueRange(stage) {
      return rangeMinMaxFromString(stage.metrics.revenueRunRate);
    }

    function markerLeftPct(active) {
      const mid = (active.startYear + active.endYear) / 2;
      return (mid / YEARS_MAX) * 100;
    }

    // ---------- UI Components ---------- //
    const Toggle = ({ value, onChange, aLabel, bLabel }) => (
      <div className="inline-flex rounded-2xl border border-[var(--kf-outline)] shadow-sm overflow-hidden">
        <button
          className={classNames(
            "px-3 py-1 text-sm focus:outline-none",
            value === "metrics" ? "bg-[var(--kf-primary)] text-white" : "bg-[var(--kf-surface)] hover:opacity-90"
          )}
          onClick={() => onChange("metrics")}
          aria-pressed={value === "metrics"}
        >
          {aLabel}
        </button>
        <button
          className={classNames(
            "px-3 py-1 text-sm focus:outline-none",
            value === "people" ? "bg-[var(--kf-primary)] text-white" : "bg-[var(--kf-surface)] hover:opacity-90"
          )}
          onClick={() => onChange("people")}
          aria-pressed={value === "people"}
        >
          {bLabel}
        </button>
      </div>
    );

    const NavToggle = ({ value, onChange }) => (
      <div className="inline-flex rounded-2xl border border-[var(--kf-outline)] shadow-sm overflow-hidden">
        {[
          { key: "bars", label: "Bars" },
          { key: "headcount", label: "Headcount" },
          { key: "revenue", label: "Revenue" },
        ].map((opt) => (
          <button
            key={opt.key}
            className={classNames(
              "px-3 py-1 text-sm focus:outline-none",
              value === opt.key ? "bg-[var(--kf-primary)] text-white" : "bg-[var(--kf-surface)] hover:opacity-90"
            )}
            onClick={() => onChange(opt.key)}
            aria-pressed={value === opt.key}
          >
            {opt.label}
          </button>
        ))}
      </div>
    );

    const Badge = ({ children }) => (
      <span className="inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-medium bg-[var(--kf-accent)] text-[var(--kf-ink)]">{children}</span>
    );

    const Pill = ({ children }) => (
      <span className="inline-flex items-center px-2.5 py-1 rounded-full text-[12px] bg-[var(--kf-surface)] border border-[var(--kf-outline)] shadow-sm">{children}</span>
    );

    // Basic responsive SVG line chart for navigation with tooltips and bands
    function LineNavChart({
      points, // { x: yearMid, y: number, yMin, yMax, id, name }
      yLabel,
      formatY,
      formatRange,
      activeId,
      onSelect,
    }) {
      const svgRef = useRef(null);
      const width = 900; // virtual; will scale via viewBox
      const height = 260;
      const pad = { l: 56, r: 16, t: 16, b: 32 };
      const usableW = width - pad.l - pad.r;
      const usableH = height - pad.t - pad.b;

      // Filter nulls for y domain
      const numeric = points.filter((p) => typeof p.y === "number");
      const yCandidates = [];
      numeric.forEach((p) => {
        yCandidates.push(p.y);
        if (typeof p.yMin === "number") yCandidates.push(p.yMin);
        if (typeof p.yMax === "number") yCandidates.push(p.yMax);
      });
      const yMinDom = Math.min(...yCandidates);
      const yMaxDom = Math.max(...yCandidates);
      const yPad = (yMaxDom - yMinDom) * 0.1 || 1;
      const y0 = yMinDom - yPad;
      const y1 = yMaxDom + yPad;

      const xScale = (x) => pad.l + (x / YEARS_MAX) * usableW;
      const yScale = (y) => pad.t + usableH - ((y - y0) / (y1 - y0)) * usableH;

      // Area band (confidence band using min/max per stage)
      const bandPts = numeric.filter((p) => typeof p.yMin === "number" && typeof p.yMax === "number");
      let bandPath = "";
      if (bandPts.length >= 2) {
        const upper = bandPts.map((p) => `L${xScale(p.x)},${yScale(p.yMax)}`).join(" ").replace(/^L/, "M");
        const lower = bandPts.slice().reverse().map((p) => `L${xScale(p.x)},${yScale(p.yMin)}`).join(" ");
        bandPath = `${upper} ${lower} Z`;
      }

      // Line path through midpoints
      const linePath = numeric.map((p, i) => `${i === 0 ? "M" : "L"}${xScale(p.x)},${yScale(p.y)}`).join(" ");

      // Tooltip state
      const [hoverId, setHoverId] = useState(null);
      const hoverPoint = hoverId ? numeric.find((p) => p.id === hoverId) || null : null;

      const onMouseMove = (e) => {
        const rect = svgRef.current?.getBoundingClientRect();
        if (!rect) return;
        const x = e.clientX - rect.left;
        const frac = Math.min(1, Math.max(0, (x - pad.l) / (rect.width - pad.l - pad.r)));
        const year = frac * YEARS_MAX;
        // nearest point by x
        const nearest = numeric.reduce((best, p) => {
          const d = Math.abs(p.x - year);
          return d < best.dist ? { id: p.id, dist: d } : best;
        }, { id: numeric[0].id, dist: Infinity });
        setHoverId(nearest.id);
      };

      const onMouseLeave = () => setHoverId(null);
      const onClick = () => { if (hoverId) onSelect(hoverId); };

      // Tooltip position in % so it scales with SVG
      const tipStyle = hoverPoint ? {
        left: `${(xScale(hoverPoint.x) / width) * 100}%`,
        top: `${(yScale(hoverPoint.y) / height) * 100}%`,
      } : undefined;

      return (
        <div className="relative">
          <svg
            ref={svgRef}
            viewBox={`0 0 ${width} ${height}`}
            className="w-full h-64 cursor-crosshair"
            role="img"
            onMouseMove={onMouseMove}
            onMouseLeave={onMouseLeave}
            onClick={onClick}
          >
            {/* grid */}
            {[0, 2, 4, 6, 8, 10].map((t, i) => (
              <g key={i}>
                <line x1={xScale(t)} x2={xScale(t)} y1={pad.t} y2={height - pad.b} className="stroke-[var(--kf-outline)]" strokeWidth={1} />
                <text x={xScale(t)} y={height - 8} className="text-[10px] fill-[var(--kf-muted)]" textAnchor="middle">{t}</text>
              </g>
            ))}
            {/* y axis label */}
            <text x={pad.l - 8} y={pad.t} className="text-[10px] fill-[var(--kf-muted)]" textAnchor="end">{yLabel}</text>
            {/* band */}
            {bandPath && (
              <path d={bandPath} fill="var(--kf-primary)" opacity={0.08} />
            )}
            {/* line */}
            <path d={linePath} fill="none" stroke="var(--kf-primary)" strokeWidth={2} />
            {/* points */}
            {numeric.map((p) => (
              <g key={p.id}>
                {/* whiskers for min/max at each point */}
                {typeof p.yMin === "number" && typeof p.yMax === "number" && (
                  <g>
                    <line x1={xScale(p.x)} x2={xScale(p.x)} y1={yScale(p.yMin)} y2={yScale(p.yMax)} stroke="var(--kf-primary)" opacity={0.3} />
                    <line x1={xScale(p.x) - 4} x2={xScale(p.x) + 4} y1={yScale(p.yMin)} y2={yScale(p.yMin)} stroke="var(--kf-primary)" opacity={0.3} />
                    <line x1={xScale(p.x) - 4} x2={xScale(p.x) + 4} y1={yScale(p.yMax)} y2={yScale(p.yMax)} stroke="var(--kf-primary)" opacity={0.3} />
                  </g>
                )}
                <circle cx={xScale(p.x)} cy={yScale(p.y)} r={activeId === p.id ? 5 : 3} fill={activeId === p.id ? "var(--kf-primary)" : "var(--kf-ink)"} />
              </g>
            ))}
            {/* hover crosshair */}
            {hoverPoint && (
              <line x1={xScale(hoverPoint.x)} x2={xScale(hoverPoint.x)} y1={pad.t} y2={height - pad.b} stroke="var(--kf-primary)" strokeDasharray="3 3" opacity={0.4} />
            )}
          </svg>

          {/* Tooltip */}
          {hoverPoint && (
            <div
              className="absolute z-10 -translate-x-1/2 -translate-y-[110%] rounded-xl border border-[var(--kf-outline)] bg-[var(--kf-surface)] px-3 py-2 shadow-md text-xs min-w-[160px]"
              style={tipStyle}
              role="tooltip"
            >
              <div className="font-medium text-[var(--kf-ink)]">{hoverPoint.name}</div>
              <div className="mt-1 flex items-center gap-2">
                <span className="rounded px-1 py-0.5 bg-[var(--kf-accent)]">{yLabel}</span>
                <span>
                  {formatY(hoverPoint.y)}
                  {typeof hoverPoint.yMin === "number" && typeof hoverPoint.yMax === "number" && (
                    <>
                      {" "}
                      <span className="text-[var(--kf-muted)]">(range {formatRange(hoverPoint.yMin, hoverPoint.yMax)})</span>
                    </>
                  )}
                </span>
              </div>
              <div className="mt-1 text-[10px] text-[var(--kf-muted)]">Click to select this stage</div>
            </div>
          )}
        </div>
      );
    }

    // ---------- Main App ---------- //
    function DefenceStartupTimeline() {
      const [view, setView] = useState("metrics");
      const [navView, setNavView] = useState("bars");
      const [activeId, setActiveId] = useState(STAGES[0].id);
      const activeStage = useMemo(() => STAGES.find((s) => s.id === activeId), [activeId]);

      // Layout for non-overlapping timeline bars
      const laneHeight = 44; // px height per row
      const laneGap = 8; // px gap between rows
      const trackHeight = STAGES.length * (laneHeight + laneGap) + 4;

      // Prepare chart points with bands
      const chartPoints = useMemo(() => {
        return STAGES.map((s) => {
          const hRange = headcountRange(s);
          const rRange = revenueRange(s);
          return {
            x: (s.startYear + s.endYear) / 2,
            yH: headcountValue(s),
            yHMin: hRange.min,
            yHMax: hRange.max,
            yR: revenueMillions(s),
            yRMin: rRange.min,
            yRMax: rRange.max,
            id: s.id,
            name: s.name,
          };
        });
      }, []);

      useEffect(() => {
        // report if Tailwind failed to load (no class applied)
        if (!window.tailwind) {
          report("Tailwind may be blocked; the app will still function but styling could be minimal.");
        }
      }, []);

      return (
        <div
          className="min-h-screen w-full text-[var(--kf-ink)]"
          style={{
            ['--kf-primary']: '#0F6D5F',
            ['--kf-ink']: '#0f1f1c',
            ['--kf-muted']: '#5b6b65',
            ['--kf-bg']: '#f4faf7',
            ['--kf-surface']: '#ffffff',
            ['--kf-surface-2']: '#eef7f3',
            ['--kf-accent']: '#c8e7df',
            ['--kf-outline']: '#d7e8e3',
          }}
        >
          <div className="bg-gradient-to-b from-[var(--kf-bg)] to-white">
            {/* Header */}
            <header className="mx-auto max-w-7xl px-4 pt-8 pb-4">
              <div className="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
                <div>
                  <h1 className="text-2xl sm:text-3xl font-bold tracking-tight">VC-Funded Defence Start-up Journey</h1>
                  <p className="text-sm text-[var(--kf-muted)] mt-1">Interactive timeline from Pre-seed/Seed to Exit. Toggle between <strong>Metrics</strong> and <strong>People & Korn Ferry Help</strong>.</p>
                </div>
                <div className="flex items-center gap-2">
                  <Toggle value={view} onChange={(v) => setView(v)} aLabel="Metrics" bLabel="People & KF Help"/>
                </div>
              </div>
            </header>

            {/* Timeline */}
            <section className="mx-auto max-w-7xl px-4">
              <div className="rounded-3xl border border-[var(--kf-outline)] bg-[var(--kf-surface)] p-4 sm:p-6 shadow-sm">
                <div className="mb-3 flex items-center justify-between">
                  <div className="flex items-center gap-2">
                    <Badge>Years since founding</Badge>
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="text-xs text-[var(--kf-muted)]">Navigation:</span>
                    <NavToggle value={navView} onChange={setNavView} />
                  </div>
                </div>

                {/* Navigation Views */}
                <div className="mt-4">
                  <div className="relative rounded-2xl border border-[var(--kf-outline)] bg-[var(--kf-surface-2)] p-4 overflow-hidden">
                    {navView === 'bars' ? (
                      <div className="relative" style={{ height: `${trackHeight}px` }}>
                        {STAGES.map((s, idx) => {
                          const leftPct = (s.startYear / YEARS_MAX) * 100;
                          const widthPct = ((s.endYear - s.startYear) / YEARS_MAX) * 100;
                          const isActive = activeId === s.id;
                          const topPx = idx * (laneHeight + laneGap);
                          return (
                            <button
                              key={s.id}
                              onClick={() => setActiveId(s.id)}
                              className={classNames(
                                "absolute rounded-xl border flex items-center justify-center px-3 transition",
                                isActive ? "bg-[var(--kf-primary)] text-white border-[var(--kf-primary)] shadow-md" : "bg-[var(--kf-accent)] text-[var(--kf-ink)] border-[var(--kf-outline)] hover:shadow"
                              )}
                              style={{ left: `${leftPct}%`, width: `${widthPct}%`, top: `${topPx}px`, height: `${laneHeight}px` }}
                              aria-pressed={isActive}
                              aria-label={`${s.name} ${s.startYear} to ${s.endYear} years`}
                              title={`${s.name} (${s.startYear}–${s.endYear} yrs)`}
                            >
                              <span className="truncate text-sm font-semibold">{s.name}</span>
                            </button>
                          );
                        })}
                        {/* Marker at midpoint of the active stage */}
                        <div
                          className="absolute top-0 bottom-0 w-[2px] bg-[var(--kf-primary)]"
                          style={{ left: `${markerLeftPct(activeStage)}%` }}
                          aria-hidden
                        />
                      </div>
                    ) : navView === 'headcount' ? (
                      <LineNavChart
                        points={chartPoints.map((p) => ({ x: p.x, y: p.yH, yMin: p.yHMin, yMax: p.yHMax, id: p.id, name: p.name }))}
                        yLabel="Headcount"
                        formatY={(n) => Math.round(n).toString()}
                        formatRange={(a,b) => `${Math.round(a)}–${Math.round(b)}`}
                        activeId={activeId}
                        onSelect={setActiveId}
                      />
                    ) : (
                      <LineNavChart
                        points={chartPoints.map((p) => ({ x: p.x, y: p.yR, yMin: p.yRMin, yMax: p.yRMax, id: p.id, name: p.name }))}
                        yLabel="Revenue run-rate (USD m)"
                        formatY={(n) => `${n.toFixed(1)}`}
                        formatRange={(a,b) => `${a.toFixed(1)}–${b.toFixed(1)}`}
                        activeId={activeId}
                        onSelect={setActiveId}
                      />
                    )}
                    {/* Axis tick labels for bars view */}
                    {navView === 'bars' && (
                      <div className="mt-2 flex justify-between text-xs text-[var(--kf-muted)]">
                        {[0, 2, 4, 6, 8, 10].map((t) => (
                          <span key={t}>{t}</span>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </section>

            {/* Details */}
            <section className="mx-auto max-w-7xl px-4 mt-6 mb-16">
              <div className="grid grid-cols-1 lg:grid-cols-3 gap-4">
                {/* Left: Overview */}
                <div className="lg:col-span-1">
                  <div className="rounded-3xl border border-[var(--kf-outline)] bg-[var(--kf-surface)] p-5 shadow-sm h-full">
                    <div className="flex items-start gap-3">
                      <div className="p-2 rounded-xl bg-[var(--kf-accent)]"><Info className="w-5 h-5"/></div>
                      <div>
                        <h2 className="text-lg font-semibold">{activeStage.name}</h2>
                        <p className="text-sm text-[var(--kf-muted)]">{activeStage.startYear}–{activeStage.endYear} years since founding</p>
                      </div>
                    </div>

                    <div className="mt-5">
                      <div className="text-xs uppercase tracking-wide text-[var(--kf-muted)] mb-2">Key challenges</div>
                      <ul className="space-y-2 list-disc pl-5 text-sm">
                        {activeStage.challenges.map((c, i) => (
                          <li key={i}>{c}</li>
                        ))}
                      </ul>
                    </div>
                  </div>
                </div>

                {/* Right: Switchable views */}
                <div className="lg:col-span-2">
                  <div className="rounded-3xl border border-[var(--kf-outline)] bg-[var(--kf-surface)] p-5 shadow-sm h-full">
                    <div className="flex items-center justify-between">
                      <h3 className="text-base font-semibold">{view === "metrics" ? "Stage metrics & context" : "People needs & how Korn Ferry can help"}</h3>
                      <Toggle value={view} onChange={(v) => setView(v)} aLabel="Metrics" bLabel="People & KF Help"/>
                    </div>

                    <div className="mt-4">
                      {view === "metrics" ? (
                        <div key="metrics" className="space-y-4">
                          <div className="rounded-2xl border border-[var(--kf-outline)] p-4 bg-[var(--kf-surface)]">
                            <div className="text-sm text-[var(--kf-muted)]">Indicative position of <strong>{activeStage.name}</strong> on the 0–{YEARS_MAX} year journey. Click a stage above (or a chart point) to navigate.</div>
                            <div className="mt-3 grid grid-cols-1 sm:grid-cols-3 gap-3">
                              <div className="rounded-xl bg-[var(--kf-surface-2)] p-3 border border-[var(--kf-outline)]">
                                <div className="text-xs uppercase text-[var(--kf-muted)] mb-1">Funding</div>
                                <div className="font-medium whitespace-normal break-words leading-snug">{activeStage.metrics.funding}</div>
                                <div className="text-xs text-[var(--kf-muted)] mt-1 whitespace-normal break-words">{activeStage.context.funding}</div>
                              </div>
                              <div className="rounded-xl bg-[var(--kf-surface-2)] p-3 border border-[var(--kf-outline)]">
                                <div className="text-xs uppercase text-[var(--kf-muted)] mb-1">Revenue run-rate</div>
                                <div className="font-medium whitespace-normal break-words leading-snug">{activeStage.metrics.revenueRunRate}</div>
                                <div className="text-xs text-[var(--kf-muted)] mt-1 whitespace-normal break-words">{activeStage.context.revenueRunRate}</div>
                              </div>
                              <div className="rounded-xl bg-[var(--kf-surface-2)] p-3 border border-[var(--kf-outline)]">
                                <div className="text-xs uppercase text-[var(--kf-muted)] mb-1">Headcount</div>
                                <div className="font-medium whitespace-normal break-words leading-snug">{activeStage.metrics.headcount}</div>
                                <div className="text-xs text-[var(--kf-muted)] mt-1 whitespace-normal break-words">{activeStage.context.headcount}</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      ) : (
                        <div key="people">
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className="rounded-2xl border border-[var(--kf-outline)] p-4 bg-[var(--kf-surface)]">
                              <div className="flex items-center gap-2 mb-2"><Users className="w-4 h-4"/><span className="text-sm font-semibold">Key people needs</span></div>
                              <ul className="space-y-2 list-disc pl-5 text-sm">
                                {activeStage.peopleNeeds.map((p, i) => (<li key={i}>{p}</li>))}
                              </ul>
                            </div>
                            <div className="rounded-2xl border border-[var(--kf-outline)] p-4 bg-[var(--kf-surface)]">
                              <div className="flex items-center gap-2 mb-2"><Briefcase className="w-4 h-4"/><span className="text-sm font-semibold">How Korn Ferry can help</span></div>
                              <ul className="space-y-2 list-disc pl-5 text-sm">
                                {activeStage.kfHelp.map((k, i) => (<li key={i}>{k}</li>))}
                              </ul>
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>

          {/* Footer & Diagnostics */}
          <footer className="mx-auto max-w-7xl px-4 pb-12 text-xs text-[var(--kf-muted)]">
            <div className="rounded-3xl border border-[var(--kf-outline)] bg-[var(--kf-surface)] p-4 shadow-sm">
              <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                <div>© {new Date().getFullYear()} Defence start-up journey (illustrative).</div>
                <div className="flex items-center gap-2">
                  <ShieldCheck className="w-4 h-4"/> <span>Classification, export controls & procurement rules may adjust timelines.</span>
                </div>
              </div>

              {/* Diagnostics toggle (kept simple, no tests in this standalone) */}
              <div className="mt-4 border-t border-[var(--kf-outline)] pt-3">
                <details className="rounded-xl border border-[var(--kf-outline)] p-2 bg-[var(--kf-surface)]">
                  <summary className="flex items-center gap-2 cursor-pointer"><Bug className="w-4 h-4"/> Notes</summary>
                  <ul className="mt-2 list-disc pl-5 space-y-1">
                    <li>No build step required; runs fully in the browser via CDN.</li>
                    <li>If you see a yellow notice above, styling CDNs might be blocked on your network.</li>
                    <li>Use the Navigation toggle (Bars, Headcount, Revenue) to explore the journey.</li>
                    <li>Switch between "Metrics" and "People & KF Help" with the top-right toggle.</li>
                  </ul>
                </details>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    // Mount after DOM is ready
    (function mount() {
      const el = document.getElementById("root");
      if (!el) {
        report("Couldn't find #root element.");
        return;
      }
      try {
        const root = ReactDOM.createRoot(el);
        root.render(<DefenceStartupTimeline />);
      } catch (err) {
        const status = document.getElementById('status');
        if (status) {
          status.className = "m-4 p-3 rounded border text-xs bg-red-50 text-red-800";
          status.textContent = "[Error] " + (err && err.message ? err.message : err);
          status.style.display = "block";
        }
      }
    })();
  </script>
</body>
</html>
